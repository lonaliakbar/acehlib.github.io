<script>
    function loadInfo() {
        const urlParams = new URLSearchParams(window.location.search);
        const nomor = urlParams.get('nomor') || 1; // Default ke 1 jika tidak ada
          
        if (!nomor) {
            document.getElementById("error-message").textContent = "❌ Parameter 'nomor' tidak ditemukan di URL.";
            return;
        }

        document.getElementById("loading").style.display = "block";

        fetch(`${apiUrl}?type=1&nomor=${nomor}`)
            .then(response => response.json())
            .then(result => {
                document.getElementById("loading").style.display = "none";
                if (result.error) {
                    document.getElementById("error-message").textContent = "❌ " + result.error;
                } else {
                    document.getElementById("judul").textContent = result.judul;
                    document.getElementById("url").textContent = result.url;
                    document.getElementById("url").href = result.url;
                    document.getElementById("bahasa").textContent = result.bahasa;
                    document.getElementById("jenis").textContent = result.jenis;
                    document.getElementById("info-box").style.display = "block";
                    
                    // Mengubah title halaman menjadi judul buku
                    document.title = result.judul;
                }
            })
            .catch(error => {
                document.getElementById("loading").style.display = "none";
                document.getElementById("error-message").textContent = "❌ Terjadi kesalahan saat mengambil data.";
                console.error("Error:", error);
            });
    }

    window.onload = loadInfo;
</script>
